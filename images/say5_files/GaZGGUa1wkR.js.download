if (self.CavalryLogger) { CavalryLogger.start_js(["ch5WI"]); }

__d("Poller",["ArbiterMixin","AsyncRequest","CurrentUser","TimeSlice","clearTimeout","emptyFunction","mixin","setTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d._config=babelHelpers["extends"]({clearOnQuicklingEvents:!0,setupRequest:b("emptyFunction"),maxRequests:Infinity},c);d._handle=null;d._isSkipIndefinitely=!1;d._hasSkippedRequest=!1;d._requests=0;d._muted=!1;d._polling=!1;d._skip=!1;d._cancelRequest=b("emptyFunction");d._config.dontStart||d.start();return d}var d=c.prototype;d.start=function(){if(this._polling)return this;this._requests=0;this.request();return this};d.stop=function(){this._cancelRequest();return this};d.mute=function(){this._muted=!0;return this};d.resume=function(){__p&&__p();if(this._muted){this._muted=!1;if(this._handle===null&&this._polling)return this.request()}if(this._isSkipIndefinitely){this._isSkipIndefinitely=!1;return this.request()}return this};d.skip=function(){this._skip=!0;return this};d.startSkipIndefinitely=function(){this._isSkipIndefinitely=!0;return this};d.stopSkipIndefinitely=function(){this._isSkipIndefinitely=!1;if(this._hasSkippedRequest)return this.request();else return this};d.isSkipIndefinitely=function(){return this._isSkipIndefinitely};d.reset=function(){return this.stop().start()};d.request=function(){__p&&__p();var a=this;this._cancelRequest();this._polling=!0;if(!this._config.allowNotLoggedIn&&!g())return this._done();if(this._muted)return this;var c=!1;this._cancelRequest=function(){c=!0,a._cleanup()};if(this._isSkipIndefinitely){this._deferRequest();this._hasSkippedRequest=!0;return this}else this._hasSkippedRequest=!1;if(++this._requests>this._config.maxRequests)return this._done();var d=new(b("AsyncRequest"))();d.setIsBackgroundRequest(!0);d.setInitialHandler(function(){return!c});d.setFinallyHandler(this._deferRequest.bind(this));d.setInitialHandler=b("emptyFunction"),d.setFinallyHandler=b("emptyFunction");this._config.setupRequest(d,this);this._skip?(this._skip=!1,b("setTimeoutAcrossTransitions")(this._deferRequest.bind(this),0)):d.send();return this};d.isPolling=function(){return this._polling};d.isMuted=function(){return this._muted};d.setInterval=function(a){a&&(this._config.interval=a,this.start())};d.getInterval=function(){return this._config.interval};d._cleanup=function(){this._handle!==null&&b("clearTimeout")(this._handle),this._handle=null,this._cancelRequest=b("emptyFunction"),this._polling=!1};d._done=function(){this._cleanup();this.inform("done",{sender:this});return this};d._deferRequest=function(){__p&&__p();var a=this;if(!this._polling)return;if(this._requests<this._config.maxRequests){var d=this._config.interval;d=typeof d==="function"?d(this._requests):d;d=d>c.MIN_INTERVAL?d:c.MIN_INTERVAL;this._config.clearOnQuicklingEvents?this._handle=b("setTimeout")(b("TimeSlice").guard(function(){a.request()},"Poller setTimeout",{propagationType:b("TimeSlice").PropagationType.ORPHAN}),d):this._handle=b("setTimeoutAcrossTransitions")(b("TimeSlice").guard(function(){a.request()},"Poller setTimeout",{propagationType:b("TimeSlice").PropagationType.ORPHAN}),d)}else this._done()};return c}(b("mixin")(b("ArbiterMixin")));a.MIN_INTERVAL=2e3;function g(){return b("CurrentUser").isLoggedInNow()}e.exports=a}),null);
__d("FaceRecognitionController",["ArbiterMixin","BanzaiODS","Poller","mixin","removeFromArray"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d._config=babelHelpers["extends"]({uri:"/photos/tagging/recognition/",interval:2e3,maxRequests:4,targetIsPage:!1,targetID:null},c);d._cleanup();d._poller=new(b("Poller"))({dontStart:!0,maxRequests:d._config.maxRequests,interval:d._config.interval,setupRequest:function(a,b){(!this._pendingPhotos||this._pendingPhotos.length===0)&&b.skip(),a.setURI(this._config.uri).setData({recognition_project:"composer_facerec",photos:this._pendingPhotos,waterfallID:this._config.waterfallID,target:this._config.targetID,is_page:this._config.targetIsPage,include_unrecognized_faceboxes:!!this._config.include_unrecognized_faceboxes,include_face_crop_src:!!this._config.include_face_crop_src,include_recognized_user_profile_picture:!!this._config.include_recognized_user_profile_picture,include_low_confidence_recognitions:!!this._config.include_low_confidence_recognitions}).setHandler(this._handleResponse.bind(this))}.bind(babelHelpers.assertThisInitialized(d))});d._poller.subscribe("done",function(){var a=this._pendingPhotos;this._cleanup();this.inform("done",{unresolved:a,facerecWaterfallEvent:"client_recognition_poller_give_up"})}.bind(babelHelpers.assertThisInitialized(d)));return d}var d=c.prototype;d.setWaterfallID=function(a){this._config.waterfallID=a};d.start=function(a){Array.prototype.push.apply(this._pendingPhotos,a),this._poller.reset(),this._resetSafeguardTimeout()};d.stop=function(){this._poller.stop(),this._cleanup()};d._cleanup=function(){window.clearTimeout(this._safeguardTimeout),this._safeguardTimeout=null,this._pendingPhotos=[]};d._resetSafeguardTimeout=function(){window.clearTimeout(this._safeguardTimeout),this._safeguardTimeout=window.setTimeout(function(){b("BanzaiODS").bumpEntityKey(2966,"composer_facerec","safeguard");var a=this._pendingPhotos;this._poller.stop();this._cleanup();this.inform("done",{unresolved:a,facerecWaterfallEvent:"client_recognition_poller_timeout"})}.bind(this),(this._config.maxRequests+2)*this._config.interval)};d._handleResponse=function(a){a=a.getPayload();a.forEach(function(a){var c=0;b("removeFromArray")(this._pendingPhotos,a.fbid);a.faceboxes.forEach(function(b){c+=b.recognitions.length,b.recognitions.forEach(function(c){this.inform("recognition",{photo:a.fbid,facebox:{fbid:b.fbid,x:b.x,y:b.y},recognition:c})}.bind(this))}.bind(this));this.inform("photo",{photo:a.fbid,faceboxes:a.faceboxes,recognitions:c})}.bind(this));this._pendingPhotos.length||(this._poller.stop(),this._cleanup(),this.inform("done",{unresolved:this._pendingPhotos}))};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ReactComposerAttachmentPreviewErrorBoundary.react",["FBLogger","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasError:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidCatch=function(a,c){this.setState({hasError:!0}),b("FBLogger")("react_composer").catching(a).mustfix("Cannot render the attachment preview")};d.render=function(){return this.state.hasError?null:this.props.children};return c}(b("React").Component);e.exports=a}),null);
__d("ReactComposerPhotoUploader",["requireCond","ActorURI","AsyncUploadRequest","FaceRecognitionController","cr:1094063","JpegResizerConfig","PhotosUploadID","PhotosUploadWaterfallErrorCodes","ReactComposerLoggingStore","ReactComposerMediaConfig","ReactComposerMediaUploadActions","ReactComposerMediaUploadActionType","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerMediaUtils","ReactComposerPhotoActions","cr:1082739","XComposerPhotoUploader","ifRequired","performanceNow","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=a.URL||a.webkitURL||{};c=function(){__p&&__p();function a(a,c,d){__p&&__p();this.$1=a.composerID;this.$5=d;d=b("ReactComposerMediaConfig").photo;c=this.$7(c,d);this.$6=d.uploadEndpoint;var e=b("ActorURI").create(d.uploadEndpoint,a.actorID);this.$2=new(b("XComposerPhotoUploader"))({uploadEndpoint:e,uploadData:Object.assign({qn:b("ReactComposerLoggingStore").getSessionID(this.$1),target_id:a.targetID},d.uploadData),retryLimit:d.retryLimit,concurrentLimit:d.concurrentLimit,resizer:c,onUploadEnqueued:this.$8.bind(this),onResizeStart:this.$9.bind(this),onResizeSuccess:this.$10.bind(this),onResizeFailure:this.$11.bind(this),onResizeProgress:this.$12.bind(this),onSphericalCheckSuccess:this.$13.bind(this),onSphericalCheckFailure:this.$14.bind(this),onUploadIsSpherical:this.$15.bind(this),onUploadStart:this.$16.bind(this),onUploadProgress:this.$17.bind(this),onUploadSuccess:this.$18.bind(this),onUploadFailure:this.$19.bind(this),gks:a.gks});this.$3=new(b("FaceRecognitionController"))({include_unrecognized_faceboxes:!0,include_low_confidence_recognitions:!0,include_face_crop_src:!0});this.$3.subscribe("photo",this.$20.bind(this));this.$3.subscribe("done",this.$21.bind(this));this.$4=new Map()}var c=a.prototype;c.upload=function(a,c){Boolean(c)&&(c&&this.$2.setUploadEndpoint(b("ActorURI").create(this.$6,c)));c=b("ReactComposerMediaUploadStore").getUploads(this.$1).size;this.$2.upload(a,c)};c.retry=function(a){a=this.$2.getAsyncUploadRequest([a]);a.send()};c.getAsyncUploadRequest=function(a,b){return this.$2.getAsyncUploadRequest(a,b)};c.enqueueAsyncUploadRequest=function(a,c,d,e,f,g){Boolean(g)&&(g&&this.$2.setUploadEndpoint(b("ActorURI").create(this.$6,g))),c.forEach(function(c){var g=d.indexMap?d.indexMap.get(c.uploadID):b("ReactComposerMediaUploadStore").getUploads(a).size;b("ReactComposerMediaUploadActions").enqueue(a,c.uploadID,c.name,g,b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_ENQUEUED,b("ReactComposerMediaUploadType").PHOTO,h.createObjectURL?h.createObjectURL(c):null,e.xyTags,f)}),this.getAsyncUploadRequest(c,d).send()};c.isUploadLimitExceeded=function(a,c){a=this.getMaxSelectableFilesCount(a);c=!c||!b("AsyncUploadRequest").isSupported()?1:c.length;return c>a};c.getMaxSelectableFilesCount=function(a){return a?b("ReactComposerMediaConfig").photo.limit:1};c.$8=function(a){b("ReactComposerMediaUploadActions").enqueue(this.$1,a.uploadID,a.fileName,b("ReactComposerMediaUploadStore").getUploads(this.$1).size,b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_ENQUEUED,b("ReactComposerMediaUploadType").PHOTO,a.fileURL,null,a.isSpherical)};c.$15=function(a,c,d){b("ReactComposerMediaUploadActions").isSpherical(this.$1,a.uploadID,c,d)};c.$9=function(a,c){b("ReactComposerMediaUploadActions").startResizing(this.$1,a.uploadID,{width:c.width,height:c.height,bytes:a.size})};c.$12=function(a,c){var d=this;window.setTimeout(function(){return b("ReactComposerMediaUploadActions").progressResizing(d.$1,a,100*c.written/c.total)},0)};c.$10=function(a,c,d,e,f,g,h,i){b("ReactComposerMediaUploadActions").doneResizing(this.$1,a.uploadID,{dt:e,media_data_size:a.size,width:f,height:g,bytes:c.size,upload_width:h,upload_height:i,custom_tags:{skipped_resizing:d}})};c.$11=function(a,c,d,e){b("ReactComposerMediaUploadActions").failResizing(this.$1,a.uploadID,{dt:e,bytes:a.size,error_code:d.code,error_info:d.message})};c.$13=function(a,c,d){b("ReactComposerMediaUploadActions").doneSphericalCheck(this.$1,a.uploadID,{dt:c,projection_type:d.getProjectionType()},d,!1)};c.$14=function(a,c,d){d===void 0&&(d=!1);d=d?b("PhotosUploadWaterfallErrorCodes").SPHERICAL_CHECK_TIMEOUT:b("PhotosUploadWaterfallErrorCodes").SPHERICAL_CHECK_FAILED;b("ReactComposerMediaUploadActions").failSphericalCheck(this.$1,a.uploadID,{error_code:d,dt:c})};c.$16=function(a,c){b("ReactComposerMediaUploadActions").startUploading(this.$1,a,c.upload,b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_UPLOADING),this.$4.set(a,(g||(g=b("performanceNow")))())};c.$17=function(a,c){var d=this;window.setTimeout(function(){return b("ReactComposerMediaUploadActions").progressUploading(d.$1,a,100*c.event.loaded/c.event.total,!1,null,null)},0)};c.$18=function(a,c){__p&&__p();var d=this;if(b("ReactComposerMediaUploadStore").getHasUploadBeenRemoved(this.$1,a))return;if(!c.response.payload)return;var e=Array.isArray(c.response.payload)?c.response.payload:[c.response.payload],f=this.$4.get(a)||0;f=f?(g||(g=b("performanceNow")))()-f:0;var h=e[0];e=e.slice(1);var i=b("ReactComposerMediaUploadStore").getUploadIndex(this.$1,a);b("ReactComposerMediaUploadActions").doneUploading({composerID:this.$1,uploadID:a,uploadIndex:i,type:b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_DONE,fileUpload:c.upload,timeToUpload:f,photoID:h.photoID,sphericalPhotoID:h.sphericalPhotoID,thumbSrc:h.thumbSrc,originalPhotoID:h.originalPhotoID,mediaLocation:h.mediaLocation,isSpherical:!!h.isSpherical,imageSrc:h.imageSrc,width:h.width,height:h.height,mediaTakenTime:h.mediaTakenTime});b("ReactComposerMediaUtils").changeToPeopleTaggerAfterUpload(this.$1);this.$22(a,h,c.upload);e.forEach(function(a){var e=b("PhotosUploadID").getNewID();b("ReactComposerMediaUploadActions").doneUploadingExtra(d.$1,e,a.photoID,a.thumbSrc,a.isSpherical,a.imageSrc,a.width,a.height);d.$22(e,a,c.upload)})};c.$22=function(a,c,d){this.$23()&&(b("ReactComposerPhotoActions").startRecognizing(this.$1,c.photoID),this.$3.start([c.photoID]));d=b("ReactComposerMediaUploadStore").getMediaUpload(this.$1,a);d.xyTags&&b("ReactComposerMediaUtils").handleXYTagsOnly(this.$1,d.photoID,d.xyTags)};c.$19=function(a,c,d){if(b("ReactComposerMediaUploadStore").getHasUploadBeenRemoved(this.$1,a))return;d=c.response;d={code:d.getError(),description:d.getErrorDescription(),summary:d.getErrorSummary(),"transient":d.isTransient()||d.getError()==1004||d.getError()==1006};b("ReactComposerMediaUploadActions").failUploading(this.$1,a,c.upload,(g||(g=b("performanceNow")))()-this.$4.get(a),d,b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_FAILED)};c.$20=function(a,c){var d=this;this.$23()&&c.faceboxes.forEach(function(a){var e;if(a.recognitions.length>0){var f=a.recognitions[0].user;e={subjectID:f.fbid,value:f.name}}b("ReactComposerPhotoActions").addFacebox(d.$1,c.photo,{id:a.fbid,x:a.x,y:a.y,top:a.top,left:a.left,width:a.width,height:a.height,croppedURI:a.src,bestRecognition:e,allRecognitions:a.allRecognitions})});b("ReactComposerPhotoActions").finishRecognizingPhoto(this.$1,c.photo)};c.$21=function(a,c){b("ReactComposerPhotoActions").finishRecognizing(this.$1,c.unresolved,c.facerecWaterfallEvent||null)};c.$23=function(){var a=this;return this.$5.disableFaceRecognition?!1:b("ifRequired")("ReactComposerOptimisticPostingStore",function(b){return!b.isOptimisticallyPosting(a.$1)},function(){return!0})};c.$7=function(a,c){__p&&__p();var d,e=(d=b("qex"))._("1078979"),f=d._("1082741"),g=d._("1074292");d=d._("1136795");if(e==="spectrum"){if(b("cr:1082739")!=null&&b("cr:1082739").isSupported()){var h=b("cr:1082739").getSingleton();f!=null&&(h.setMaxHeight(f),h.setMaxWidth(f));g!=null&&h.setEncodeQuality(g);return h}}else if(e==="none")return null;else if(b("cr:1094063")!=null&&b("cr:1094063").isSupported()){g=b("cr:1094063").getSingleton(a>1?b("cr:1094063").DEFAULT_POOL_SIZE:1);g.setUndershoot(b("JpegResizerConfig").undershoot).setEncodeQuality(b("JpegResizerConfig").quality);d&&f!=null?(g.setMaxHeight(f),g.setMaxWidth(f)):g.setHighQuality(c.highQuality);return g}b("ReactComposerMediaUploadActions").resizerUnavailable(this.$1);return null};return a}();e.exports=c}),null);
__d("ReactComposerScrapedAttachmentPhotoDropWarningDialog.react",["fbt","LayerHideOnEscape","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onCancel&&c.props.onCancel()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.subscribe("hide",this.$1)};d.render=function(){var a;return(a=b("React")).jsxs(b("XUIDialog.react"),{ref:"dialog",shown:this.props.shown,width:500,layerHideOnBlur:!1,behaviors:{LayerHideOnEscape:b("LayerHideOnEscape")},children:[a.jsx(b("XUIDialogHeader.react"),{children:a.jsx(b("XUIDialogHeaderTitle.react"),{children:g._("Remove Link Preview")})}),a.jsx(b("XUIDialogBody.react"),{children:g._("Uploading a photo will remove the link preview. Do you want to continue?")}),a.jsxs(b("XUIDialogFooter.react"),{children:[a.jsx(b("XUIButton.react"),{use:"confirm",onClick:this.props.onConfirm,label:g._("Upload Photo")}),a.jsx(b("XUIButton.react"),{onClick:this.props.onCancel,label:g._("Cancel")})]})]},"dialog")};return c}(b("React").PureComponent);c.propTypes={shown:a.bool,onConfirm:a.func,onCancel:a.func};e.exports=c}),null);
__d("ReactComposerDragDropPromptContainer.react",["requireCond","FluxContainer","React","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerDragDropPromptLazy.react","ReactComposerFileStore","ReactComposerFileUtils","ReactComposerLoggingName","ReactComposerPhotoUploader","ReactComposerScrapedAttachmentActions","ReactComposerScrapedAttachmentPhotoDropWarningDialog.react","ReactComposerScrapedAttachmentStore","ReactComposerStatusUtils","ReactComposerVideoUploadStore","ReactComposerWorkFileStore","cr:893589"],(function(a,b,c,d,e,f){__p&&__p();var g=b("ReactComposerWorkFileStore").module;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={photoDropWarningShown:!1,pendingFiles:null},d.$4=function(a){__p&&__p();var c=d.context.composerID;if(b("cr:893589")){var e;((e=d.props.config.sproutsConfig)==null?void 0:(e=e.WORK_FILE)==null?void 0:e.enabled)&&b("cr:893589").areValidFiles(c,a,(e=(e=d.props.config)==null?void 0:(e=e.taggersConfig)==null?void 0:(e=e.WORK_FILE)==null?void 0:e.maxFileSize)!=null?e:1e8)&&b("cr:893589").onComposerFilesSelected(c,a);return}e=b("ReactComposerFileUtils").selectFileOrWorkFileModule(b("ReactComposerFileStore"),g).getMaxFileUploadSize(c);if(b("ReactComposerFileUtils").hasExceededFileSize(a[0],e))return;b("ReactComposerStatusUtils").loadDroppedFile(c,a[0])},d.$5=function(a){if(b("ReactComposerScrapedAttachmentStore").hasAttachment(d.context.composerID)&&d.state.pendingFiles==null){d.setState({photoDropWarningShown:!0,pendingFiles:a});return}if(!d.$1)return;b("ReactComposerStatusUtils").uploadDroppedMedia(d.context.composerID,a,d.$1,d.props.config.targetData.targetSupportsMultiMedia,d.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],d.context)},d.$2=function(){d.setState({photoDropWarningShown:!1,pendingFiles:null})},d.$3=function(){var a=d.state.pendingFiles;d.setState({photoDropWarningShown:!1,pendingFiles:null});a&&d.$5(a)},d.$6=function(a){b("ReactComposerStatusUtils").scrapeLink(d.context.composerID,d.context.targetID,a,d.context.composerType,d.context.actorID,b("ReactComposerLoggingName").LINK_DROPPED)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("ReactComposerVideoUploadStore")]};c.calculateState=function(a,c,d){c=d.composerID;return{pendingFiles:a&&a.pendingFiles,photoDropWarningShown:!!(a&&a.photoDropWarningShown),enabled:!b("ReactComposerVideoUploadStore").getVideo(c)}};var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS],c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];this.$1=new(b("ReactComposerPhotoUploader"))(this.context,c.photoLimit,{disableFaceRecognition:c.disableFaceboxTagger});b("ReactComposerScrapedAttachmentActions").enabled(this.context.composerID,a.canScrapeShare)};d.renderLayers=function(){return b("React").jsx(b("ReactComposerScrapedAttachmentPhotoDropWarningDialog.react"),{shown:this.state.photoDropWarningShown,onCancel:this.$2,onConfirm:this.$3},"photoDropWarningDialog")};d.render=function(){return!this.state.enabled?b("React").jsx("span",{children:this.renderLayers()}):b("React").jsxs("span",{children:[b("React").jsx(b("ReactComposerDragDropPromptLazy.react"),{root:this.props.root,onFilesDrop:this.$4,onMediaDrop:this.$5,onURLDrop:this.$6}),this.renderLayers()]})};return c}(b("React").PureComponent);a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withProps:!0,withContext:!0})}),null);
__d("ReactComposerPhotoThumbnail.react",["Image.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){if(a.bgURL){var c={backgroundImage:"url("+a.bgURL+")"};return b("React").jsx("div",{className:a.bgClassName,style:c})}else if(a.imgSrc)return b("React").jsx(b("Image.react"),{alt:a.alt,className:a.imgClassName,src:a.imgSrc,style:a.style,width:a.width,height:a.height});return null};e.exports=a}),null);
__d("ReactComposerSessionMetricsActions",["ReactComposerDispatcher","ReactComposerSessionMetricsActionTypes","ReactComposerSessionMetricsStore"],(function(a,b,c,d,e,f){b("ReactComposerSessionMetricsStore");a={keystroke:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSessionMetricsActionTypes").KEYSTROKE})},paste:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSessionMetricsActionTypes").PASTE})}};e.exports=a}),null);
__d("ReactComposerPromptsActions",["ReactComposerDispatcher","ReactComposerPromptsActionTypes","ReactComposerPromptsStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerPromptsStore");a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.setMinutiaeData=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPromptsActionTypes").SET_MINUTIAE_DATA,minutiaeData:c})};c.setPromptData=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPromptsActionTypes").SET_PROMPT_DATA,promptData:c})};c.setPromptXHP=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPromptsActionTypes").SET_PROMPT_XHP,promptXHP:c})};return a}();e.exports=new a()}),null);
__d("XReactFeedComposerXPromptDismissController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/prompts/dismiss/",{user_action:{type:"Enum",enumType:1},prompt_id:{type:"String"},prompt_type:{type:"String"},prompt_tracking_string:{type:"String"},prompt_state:{type:"String"},composer_session_id:{type:"String"}})}),null);
__d("ReactComposerPromptsLoggingStore",["AsyncRequest","ComposerXSessionIDs","ReactComposerActionTypes","ReactComposerPromptsStore","ReactComposerStoreBase","ReactComposerTaggerStore","ReactComposerTaggerType","XReactFeedComposerXPromptDismissController"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;b=a.call(this,function(){return{}},function(a){c&&c.handler(a)})||this;c=babelHelpers.assertThisInitialized(b);return b}var d=c.prototype;d.handler=function(a){switch(a.type){case b("ReactComposerActionTypes").POST_STARTED:this.$ReactComposerPromptsLoggingStore1(a);break;default:}};d.$ReactComposerPromptsLoggingStore1=function(a){a=this.validateAction(a,"composerID");var b=this.$ReactComposerPromptsLoggingStore2(a);b&&this.$ReactComposerPromptsLoggingStore3(b,a)};d.$ReactComposerPromptsLoggingStore2=function(a){if(b("ReactComposerPromptsStore").getMinutiaeData(a))if(this.$ReactComposerPromptsLoggingStore4(a))return"post_without_prompt";else return"post_prompt";return null};d.$ReactComposerPromptsLoggingStore4=function(a){var c=b("ReactComposerPromptsStore").getMinutiaeData(a);return!c?!1:this.$ReactComposerPromptsLoggingStore5(a,c)||this.$ReactComposerPromptsLoggingStore6(a,c)};d.$ReactComposerPromptsLoggingStore5=function(a,c){a=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").ACTIVITY);c=c[b("ReactComposerTaggerType").ACTIVITY];if(!c||!c.action||!c.object)return!1;return!a||!a.action||!a.object?!0:a.action.getUniqueID()!==c.action.getUniqueID()||a.object.getUniqueID()!==c.object.getUniqueID()};d.$ReactComposerPromptsLoggingStore6=function(a,c){a=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").LOCATION);c=c[b("ReactComposerTaggerType").LOCATION];if(!c||!c.place)return!1;return!a||!a.place?!0:a.place.getUniqueID()!==c.place.getUniqueID()};d.$ReactComposerPromptsLoggingStore3=function(a,c){var d=b("ReactComposerPromptsStore").getPromptData(c);if(!d)return;new(b("AsyncRequest"))().setURI(b("XReactFeedComposerXPromptDismissController").getURIBuilder().getURI()).setData({user_action:a,prompt_id:d.promptID,prompt_type:d.promptType,prompt_tracking_string:d.trackingString,composer_session_id:b("ComposerXSessionIDs").getSessionID(c)}).send()};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("ReactComposerStatusPrompt.react",["Arbiter","DOMContainer.react","React","ReactComposerContextTypes","ReactComposerEvents","ReactComposerPrefillStore","ReactComposerPromptsActions","ReactComposerPromptsStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerPromptsLoggingStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerPromptsLoggingStore");a=b("React").createClass({displayName:"ReactComposerStatusPrompt",_prefillSubscription:void 0,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerPromptsStore"))],statics:{calculateState:function(a,c){return{promptXHP:b("ReactComposerPromptsStore").getPromptXHP(a)}}},getDefaultProps:function(){return{hidePrompt:!1}},UNSAFE_componentWillMount:function(){this._prefillSubscription=b("Arbiter").subscribe(b("ReactComposerEvents").SET_PREFILL_DATA+this.context.composerID,this._handlePrefill)},componentWillUnmount:function(){this._prefillSubscription&&this._prefillSubscription.unsubscribe(),this._prefillSubscription=null},render:function(){return this.props.hidePrompt||!this.state.promptXHP?null:b("React").jsx(b("DOMContainer.react"),{children:this.state.promptXHP})},_handlePrefill:function(){var a=b("ReactComposerPrefillStore").getAndEraseField(this.context.composerID,"prompt");a&&b("ReactComposerPromptsActions").setPromptXHP(this.context.composerID,a)}});e.exports=a}),null);
__d("ReactComposerStatusAttachment.react",["cx","requireCond","cr:1201381","JSResource","LeftRight.react","React","ReactComposerAttachmentPreviewContainer.react","ReactComposerAttachmentPreviewErrorBoundary.react","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerAudienceActions","ReactComposerContextTypes","ReactComposerDragDropPromptContainer.react","ReactComposerEmojiButton.react","ReactComposerFundraiserAttachmentContainerGated","ReactComposerLazyProfilePhotoBlock.react","ReactComposerPlayWithFriendsAttachmentContainerGated","ReactComposerSessionMetricsActions","ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react","ReactComposerStatusFooterContainer.react","ReactComposerStatusPrompt.react","ReactComposerSupportNowAttachmentContainerGated","ReactComposerTaggerStore","ReactComposerTaggerSummaryContainer.react","ReactComposerTaggerSummaryPlaceholder.react","ReactComposerTaggerType","cr:1214105","XUISpinner.react","lazyLoadComponent","ReactComposerStatusActions","ReactComposerPrefillMentionsInput","DraftModifier","EditorState","ReactInputSelection","SelectionState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReactComposerFundraiserAttachmentContainerGated").module,i=b("ReactComposerPlayWithFriendsAttachmentContainerGated").module,j=b("ReactComposerSupportNowAttachmentContainerGated").module,k=b("lazyLoadComponent")(b("JSResource")("ReactComposerTagEventTicketMicroAttachmentContainer.react").__setRef("ReactComposerStatusAttachment.react"));b("ReactComposerStatusActions");b("ReactComposerPrefillMentionsInput");b("DraftModifier");b("EditorState");b("ReactInputSelection");b("SelectionState");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$2=function(a){b("ReactComposerSessionMetricsActions").keystroke(d.context.composerID)},d.$3=function(a){b("ReactComposerSessionMetricsActions").paste(d.context.composerID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.props.isActive&&(this.refs&&this.refs.mentionsInput&&this.refs.mentionsInput.focus()),this.context.gks&&!this.context.gks.addAnyPostToAlbum&&b("ReactComposerAudienceActions").setCollectionIDWithoutLogging(this.context.composerID,null)};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.render=function(){__p&&__p();var a=b("ReactComposerAttachmentStore").getSelectedAttachmentID(this.context.composerID),c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS],d;(this.props.isActive||this.props.config.showExpandedComposer)&&(d=b("React").jsx(b("ReactComposerStatusFooterContainer.react"),{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,bootloader:this.props.bootloader,config:this.props.config,isMaybeJobPost:this.props.isMaybeJobPost,mediaAcceptParam:this.props.config.mediaAcceptParam,postButtonLabel:this.props.postButtonLabel?this.props.postButtonLabel:void 0,postButtonModule:this.props.postButtonModule,prefillConfig:this.props.prefillConfig,taggersConfig:this.props.taggersConfig?this.props.taggersConfig:this.props.config.taggersConfig,targetData:this.props.config.targetData,weakMention:this.props.weakMention,exceedCharacterCount:this.props.exceedCharacterCount,onMentionsInputChange:this.props.onMentionsInputChange}));var e=this.props.isActive?b("React").jsx(b("ReactComposerTaggerSummaryContainer.react"),{}):b("React").jsx(b("ReactComposerTaggerSummaryPlaceholder.react"),{}),f=c.multilingualStatus&&this.props.isActive?b("React").jsx(c.multilingualStatus,{}):null,g=c.markdownPreviewAttachment,l=null;if(g&&this.props.isActive){var m=g.container;l=b("React").jsx(m,{prettify:g.prettify,isMarkdownForInternalEmployee:g.isMarkdownForInternalEmployee,isMarkdownWideAllowed:g.isMarkdownWideAllowed,isMarkdownWideDefault:g.isMarkdownWideDefault})}m=c.donateButtonConfig;g=null;if(m){var n=m.donateButtonContainer;g=b("React").jsx(n,{charityName:m.charityName,fundraiserCampaignId:m.fundraiserCampaignId})}n=this.props.config.taggersConfig;m=n&&n[b("ReactComposerTaggerType").FORMATTED_TEXT]&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].fontTextFormats!==null&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].fontTextFormats!==void 0;var o=n&&n[b("ReactComposerTaggerType").FORMATTED_TEXT]&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].putEmojiPickerBySATPSelector,p=this.context.gks&&this.context.gks.moveEmojiPicker||m,q=b("React").jsx(b("ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react"),{config:this.props.config,onChange:this.props.onMentionsInputChange,onFocus:this.props.onFocus,onPasteFiles:this.props.onPasteFiles,handlePastedText:this.props.handlePastedText,onPostIntent:this.props.onPostIntent,placeholder:this.props.placeholder,prefillConfig:this.props.prefillConfig,ref:"mentionsInput",textLengthLimit:n&&n[b("ReactComposerTaggerType").FORMATTED_TEXT]&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].textLengthLimit,maxNewlines:n&&n[b("ReactComposerTaggerType").FORMATTED_TEXT]&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].maxNewlines,simplifyComposerMoveEmojiButton:p,canProduceSATPWithFont:m,preventFocus:this.props.preventFocus}),r=b("ReactComposerTaggerStore").getTaggerData(this.context.composerID,b("ReactComposerTaggerType").FUN_FACT);r=r&&r.isAskPost;var s=null;if(n&&n[b("ReactComposerTaggerType").FORMATTED_TEXT]&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].noSproutDesign&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].enabled&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].textFormats&&n[b("ReactComposerTaggerType").FORMATTED_TEXT].containerModule){var t,u=n[(t=b("ReactComposerTaggerType")).FORMATTED_TEXT].containerModule;s=b("React").jsx(u,{autoOpen:n[t.FORMATTED_TEXT].autoOpen,badgingEnabled:n[t.FORMATTED_TEXT].badgingEnabled,categorizedTextFormatPresets:n[t.FORMATTED_TEXT].categorizedTextFormatPresets,categorizedTrayEnabled:n[t.FORMATTED_TEXT].categorizedTrayEnabled,disableNoBgColor:n[t.FORMATTED_TEXT].disableNoBgColor,defaultFormat:n[t.FORMATTED_TEXT].defaultFormat,hidePicker:r,maxNewlines:n[t.FORMATTED_TEXT].maxNewlines,noSproutDesign:n[t.FORMATTED_TEXT].noSproutDesign,statusAttachmentActive:this.props.isActive,shouldAutoOpenWhenUserStartsTyping:n[t.FORMATTED_TEXT].shouldAutoOpenWhenUserStartsTyping,shouldUseNewComposerPickerDesign:n[t.FORMATTED_TEXT].shouldUseNewComposerPickerDesign,stickyStylesEnabled:n[t.FORMATTED_TEXT].stickyStylesEnabled,textFormats:r?n[b("ReactComposerTaggerType").FUN_FACT].textFormats:n[b("ReactComposerTaggerType").FORMATTED_TEXT].textFormats,textLengthLimit:n[b("ReactComposerTaggerType").FORMATTED_TEXT].textLengthLimit,disableSATPMemoization:n[b("ReactComposerTaggerType").FORMATTED_TEXT].disableSATPMemoization,prefillConfig:this.props.prefillConfig,allFontTextFormats:n[b("ReactComposerTaggerType").FORMATTED_TEXT].fontTextFormats,inlineEmojiPicker:p,cancelButtonType:n[b("ReactComposerTaggerType").FORMATTED_TEXT].cancelButtonType,exceedCharacterCount:this.props.exceedCharacterCount,onMentionsInputChange:this.props.onMentionsInputChange,putEmojiPickerBySATPSelector:o,fadeMenuOnHoverCancel:(u=n[b("ReactComposerTaggerType").FORMATTED_TEXT])==null?void 0:u.fadeMenuOnHoverCancel})}p&&!o&&(s=b("React").jsxs(b("LeftRight.react"),{children:[s,b("React").jsx(b("ReactComposerEmojiButton.react"),{exceedCharacterCount:this.props.exceedCharacterCount,onChange:this.props.onMentionsInputChange,canProduceSATPWithFont:m,simplifyComposerMoveEmojiButton:p})]}));t=b("React").jsxs("div",{onKeyDown:this.$2,onPaste:this.$3,children:[q,f]});if(a===b("ReactComposerAttachmentType").ANONYMOUS_GROUP_POST){r=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").ANONYMOUS_GROUP_POST];t=b("React").jsx(b("ReactComposerLazyProfilePhotoBlock.react"),{config:this.props.config,profileName:r.profileConfig.profileName,profilePicSrc:r.profileConfig.profilePicSrc,useVoiceSwitcher:!1,children:t})}else c.showProfilePic&&(t=b("React").jsx(b("ReactComposerLazyProfilePhotoBlock.react"),{config:this.props.config,profileName:c.profileName,profilePicSrc:c.profilePicSrc,profileURI:c.profileURI,profileDialogURI:c.profileDialogURI,useVoiceSwitcher:this.props.showProfileVoiceSwitcher,children:t}));u=null;if(c.topicFeedsTagger&&this.props.isActive){o=c.topicFeedsTagger;m=o.container;u=b("React").jsx(m,{composerFeedID:o.composerFeedID,photoAutoTaggingDelay:o.photoAutoTaggingDelay,photoPollingDuration:o.photoPollingDuration,photoPollingInterval:o.photoPollingInterval,showNux:o.showNux,textAutoTaggingDelay:o.textAutoTaggingDelay,topicLimit:o.topicLimit,darkLaunch:o.darkLaunch})}p=null;if(c.groupPostTagsTagger&&this.props.isActive){q=c.groupPostTagsTagger;f=q.container;p=b("React").jsx(f,{tagsLimit:q.tagsLimit,groupID:q.groupID,showNux:q.showNux,postTag:q.postTag,showSuggestions:q.showSuggestions,passLaunchGK:q.passLaunchGK})}a=null;this.props.isMultiAttachment&&b("cr:1201381")?a=b("React").jsx(b("ReactComposerAttachmentPreviewErrorBoundary.react"),{children:b("React").jsx(b("cr:1201381"),{composerContext:this.context})}):a=this.props.config.shouldShowPreviewSpinner?b("React").jsx(b("ReactComposerAttachmentPreviewContainer.react"),{spinner:b("React").jsx(b("XUISpinner.react"),{background:"light",size:"large"})}):b("React").jsx(b("ReactComposerAttachmentPreviewErrorBoundary.react"),{children:b("React").jsx(b("ReactComposerAttachmentPreviewContainer.react"),{})});r=null;if(this.props.olpDetected&&c.offerLikePostUpsellInlineBanner){m=c.offerLikePostUpsellInlineBanner;r=b("React").jsx(m,{actorID:this.context.actorID,composerID:this.context.composerID,text:this.props.olpText||"",pageID:c.pageID,photoIDs:[]})}o=null;if(b("cr:1214105")&&this.props.isActive){o=b("React").jsx(b("cr:1214105"),{context:this.context,groupID:(f=this.props.config.groupConfig)==null?void 0:f.id})}q=null;if(n&&n[b("ReactComposerTaggerType").TAG_EVENT_TICKET]&&n[b("ReactComposerTaggerType").TAG_EVENT_TICKET].enabled){q=(m=b("React")).jsx(m.Suspense,{fallback:m.jsx("div",{}),children:m.jsx(k,{composerID:this.context.composerID})})}return b("React").jsxs("div",{className:this.props.className,children:[b("React").jsx(b("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config}),b("React").jsx("div",{className:"_i-o",children:b("React").jsxs("div",{className:"_3eny",children:[b("React").jsxs("div",{className:"_7r84",children:[t,r,this.props.children,s]}),a,h?b("React").jsx(h,{}):null,j?b("React").jsx(j,{}):null,i?b("React").jsx(i,{composerID:this.context.composerID}):null,q,e,b("React").jsx(b("ReactComposerStatusPrompt.react"),{hidePrompt:this.props.isActive}),l,b("React").jsx("div",{className:"_3enz _3eo2"})]})}),g,u,p,o,d]})};return c}(b("React").Component);a.contextTypes=b("ReactComposerContextTypes");e.exports=a}),null);
__d("ReactComposerEventAttachmentActions",["ReactComposerDispatcher","ReactComposerEventAttachmentActionType","ReactComposerEventAttachmentStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerEventAttachmentStore");a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.enabled=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerEventAttachmentActionType").EVENT_ATTACHMENT_ENABLED,enabled:c})};c.fetchEventAttachment=function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerEventAttachmentActionType").FETCH_EVENT_ATTACHMENT,eventID:c})};c.setMarkup=function(a,c,d){b("ReactComposerDispatcher").dispatch({composerID:a,eventID:c,markup:d,type:b("ReactComposerEventAttachmentActionType").SET_EVENT_MARKUP})};return a}();e.exports=new a()}),null);
__d("ReactComposerStatusAttachmentFocusActionType",["keyMirror"],(function(a,b,c,d,e,f){e.exports=b("keyMirror")({FOCUS_STATUS_INPUT:null,DO_NOT_FOCUS_STATUS_INPUT:null})}),null);
__d("ReactComposerStatusAttachmentFocusStore",["ReactComposerStatusAttachmentFocusActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;c=a.call(this,function(){return{isInputFocused:!1}},function(a){switch(a.type){case b("ReactComposerStatusAttachmentFocusActionType").FOCUS_STATUS_INPUT:d&&d.$ReactComposerStatusAttachmentFocusStore1(a);break;case b("ReactComposerStatusAttachmentFocusActionType").DO_NOT_FOCUS_STATUS_INPUT:d&&d.$ReactComposerStatusAttachmentFocusStore2(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.isInputFocused=function(a){return this.getComposerData(a).isInputFocused};d.$ReactComposerStatusAttachmentFocusStore1=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isInputFocused=!0;this.emitChange(a)};d.$ReactComposerStatusAttachmentFocusStore2=function(a){a=a.composerID;var b=this.getComposerData(a);b.isInputFocused=!1;this.emitChange(a)};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("ReactComposerStatusAttachmentContainer.react",["Bootloader","FluxContainer","QE2Logger","React","ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerEventAttachmentActions","ReactComposerLocationAttachmentActions","ReactComposerLoggingName","ReactComposerPhotoUploader","ReactComposerScrapedAttachmentActions","ReactComposerStatusAttachment.react","ReactComposerStatusAttachmentFocusStore","ReactComposerStatusStore","ReactComposerStatusUtils","ReactComposerTaggerActions","ReactComposerTaggerEligibilityUtils","ReactComposerTaggerStore","ReactComposerTaggerType","URLScraper","ifRequired"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=!1,d.state={isMaybeJobPost:!1,olpDetected:!1,olpText:null,placeholder:"",exceedCharacterCount:!1,isMultiAttachment:!1},d.$3=function(){var a;a=(a=b("ReactComposerAttachmentStore").getSelectedAttachmentID(d.context.composerID))!=null?a:b("ReactComposerAttachmentType").STATUS;if(a!==b("ReactComposerAttachmentType").STATUS&&a!==b("ReactComposerAttachmentType").ANONYMOUS_GROUP_POST)return;b("ReactComposerAttachmentActions").selectAttachment(d.context.composerID,a,!0);a=b("ReactComposerTaggerStore").getSelectedTagger(d.context.composerID);a!==b("ReactComposerTaggerType").FORMATTED_TEXT&&b("ReactComposerTaggerActions").deselectCurrentTagger(d.context.composerID,b("ReactComposerLoggingName").INLINE_COMPOSER)},d.$4=function(a){__p&&__p();var c=a.getCurrentContent().getPlainText(),e=d.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];d.context.composerType==="pages_feed"&&(b("Bootloader").loadModules(["SalesPromoUtils.react"],function(a){if(a.checkIsOLP(c)){a=e.offerLikePostUpsell;var f=a.indexOf("inline")!==-1;f&&d.setState({olpDetected:!0,olpText:c});(a==="none"||f)&&b("QE2Logger").logExposureForPage("orgoff_offer_creation",e.pageID)}else d.setState({olpText:c})},"ReactComposerStatusAttachmentContainer.react"),b("Bootloader").loadModules(["JobSearchRegexUtils.react"],function(a){d.setState({isMaybeJobPost:a.checkIsJobPost(c)})},"ReactComposerStatusAttachmentContainer.react"));b("URLScraper").trigger(c)||b("ReactComposerStatusUtils").scrapeLink(d.context.composerID,d.context.targetID,c,d.context.composerType,d.context.actorID,b("ReactComposerLoggingName").INLINE_COMPOSER);!d.$2&&c.length>0&&b("ReactComposerTaggerStore").getSelectedTagger(d.context.composerID)===null&&(b("ifRequired")("ReactComposerFormattedTextStore",function(a){a.getShouldAutoOpenWhenUserStartsTyping(d.context.composerID)&&(b("ifRequired")("ReactComposerFormattedTextActions",function(a){a.setShouldFadeInPicker(d.context.composerID,!0)}),b("ReactComposerTaggerActions").selectTaggerWithoutLogging(d.context.composerID,b("ReactComposerTaggerType").FORMATTED_TEXT))}),d.$2=!0)},d.$5=function(a){b("ReactComposerAttachmentActions").selectAttachment(d.context.composerID,b("ReactComposerAttachmentType").MEDIA,!0),b("ReactComposerStatusUtils").uploadPastedFile(d.context.composerID,a[0],d.$1)},d.$6=function(a,c,e){__p&&__p();c=b("ReactComposerStatusStore").getEditorState(d.context.composerID);e=c?c.getCurrentContent().getPlainText():"";c=b("URLScraper").match(a)||e.concat(a);b("ReactComposerStatusUtils").scrapeLink(d.context.composerID,d.context.targetID,c,d.context.composerType,d.context.actorID,b("ReactComposerLoggingName").LINK_PASTED);d.context.gks.work_composer_scrape_task_number&&b("Bootloader").loadModules(["EmployeeLinkMatcher"],function(c){c=c.matchTaskNumber(a);c&&b("ReactComposerStatusUtils").scrapeLink(d.context.composerID,d.context.targetID,c,d.context.composerType,d.context.actorID,b("ReactComposerLoggingName").LINK_PASTED)},"ReactComposerStatusAttachmentContainer.react");d.context.gks.work_composer_scrape_diff_number&&b("Bootloader").loadModules(["EmployeeLinkMatcher"],function(c){c=c.matchDiffNumber(a);c&&b("ReactComposerStatusUtils").scrapeLink(d.context.composerID,d.context.targetID,c,d.context.composerType,d.context.actorID,b("ReactComposerLoggingName").LINK_PASTED)},"ReactComposerStatusAttachmentContainer.react");return!1},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("ReactComposerAttachmentStore"),b("ReactComposerStatusStore"),b("ReactComposerStatusAttachmentFocusStore"),b("ReactComposerTaggerStore")]};c.calculateState=function(a,c,d){__p&&__p();var e,f=d.composerID;d=(((e=d.extraConfig)==null?void 0:e.disableTargetChange)!==!0||((e=d.extraConfig)==null?void 0:e.isStatusActiveOnInit)!==!1)&&b("ReactComposerAttachmentStore").isSelectedAttachmentActive(f);e=b("ReactComposerStatusAttachmentFocusStore").isInputFocused(f);var g=b("ReactComposerStatusStore").getMentions(f),h=null;if(g)for(var i in g)if(Object.prototype.hasOwnProperty.call(g,i)&&g[i].isWeak==!0){h=g[i];break}g=c.placeholder;var j=b("ReactComposerTaggerStore").getTaggerData(f,b("ReactComposerTaggerType").FUN_FACT),k=c.config.taggersConfig;j&&j.promptID?g=k[b("ReactComposerTaggerType").FUN_FACT].placeholder:j&&j.isAskPost&&(g=k[b("ReactComposerTaggerType").FUN_FACT].askPlaceholder);return{isActive:d||e,isMaybeJobPost:a&&a.isMaybeJobPost,olpDetected:a&&a.olpDetected,olpText:a&&a.olpText,placeholder:g,weakMention:h,exceedCharacterCount:b("ReactComposerTaggerEligibilityUtils").exceedSATPCharacterCountOrExceedNewLinesCount(f,c),isMultiAttachment:b("ReactComposerAttachmentStore").isContentMultiShareAttachment(f)}};var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];this.$1=new(b("ReactComposerPhotoUploader"))(this.context,a.photoLimit,{disableFaceRecognition:a.disableFaceboxTagger});a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];a&&a.defaultMarkdownOn&&b("ReactComposerTaggerStore").getTaggerData(this.context.composerID,b("ReactComposerTaggerType").MARKDOWN).isMarkdown===void 0&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(this.context.composerID,b("ReactComposerTaggerType").MARKDOWN,{isMarkdown:!0})};d.componentDidMount=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];b("ReactComposerScrapedAttachmentActions").enabled(this.context.composerID,a.canScrapeShare);b("ReactComposerLocationAttachmentActions").enabled(this.context.composerID,!!a.canAttachLocation);b("ReactComposerEventAttachmentActions").enabled(this.context.composerID,a.canAttachEvent);if(this.props.scrapeLinkOnInit){a=b("ReactComposerStatusStore").getMessageText(this.context.composerID);a&&b("ReactComposerStatusUtils").scrapeLink(this.context.composerID,this.context.targetID,a,this.context.composerType,this.context.actorID,b("ReactComposerLoggingName").INLINE_COMPOSER)}};d.render=function(){var a;return b("React").jsx(b("ReactComposerStatusAttachment.react"),babelHelpers["extends"]({},this.props,this.state,{config:this.props.config,onFocus:this.$3,onMentionsInputChange:this.$4,onPasteFiles:this.$5,handlePastedText:this.$6,placeholder:this.state.placeholder,postButtonModule:this.props.postButtonModule,showProfileVoiceSwitcher:!!((a=this.context)!=null?(a=a.gks)!=null?a.showProfileVoiceSwitcher:a:a)}))};return c}(b("React").Component);a.defaultProps={scrapeLinkOnInit:!0};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withProps:!0,withContext:!0})}),null);
__d("ReactComposerStatusEagerAttachment.react",["fbt","Arbiter","React","ReactComposerAttachmentActions","ReactComposerAttachmentBodyMixin","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerPrefillConfig","ReactComposerStatusActions","ReactComposerStatusAttachmentContainer.react","ReactComposerTaggerActions","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerStatusEagerAttachment",mixins:[b("ReactComposerAttachmentBodyMixin")()],propTypes:{config:b("ReactComposerConfig").isRequired,postButtonModule:a.func.isRequired,selected:a.bool,prefillConfig:b("ReactComposerPrefillConfig")},getDefaultProps:function(){return{placeholder:g._("What's on your mind?")}},statics:{attachmentID:b("ReactComposerAttachmentType").STATUS},UNSAFE_componentWillMount:function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS].bootstrapData;b("ReactComposerStatusActions").setMentionsSource(this.context.composerID,a.mentionsSource);b("ReactComposerStatusActions").setTypeaheadReporter(this.context.composerID,a.typeaheadReporter);b("ReactComposerAttachmentActions").setInitialized(this.context.composerID,b("ReactComposerAttachmentType").STATUS);b("gkx")("678776")&&b("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS].bootstrapData.taggersSource||{})},componentDidMount:function(){b("gkx")("678776")||b("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS].bootstrapData.taggersSource||{}),b("Arbiter").inform("ReactComposerStatusEagerAttachment/mounted",this.context.composerID,"state")},renderX:function(){return b("React").jsx(b("ReactComposerStatusAttachmentContainer.react"),babelHelpers["extends"]({},this.props))}});e.exports=c}),null);
__d("ReactComposerFeedMediaPostButtonContainer.react",["React","ReactComposerContextTypes","ReactComposerFeedStore","ReactComposerMediaPostButtonContainerMixin"],(function(a,b,c,d,e,f){a=b("React").createClass({displayName:"ReactComposerFeedMediaPostButtonContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerMediaPostButtonContainerMixin")],getDefaultProps:function(){return{useDefaultScheduleComponent:!0}},componentDidMount:function(){b("ReactComposerFeedStore").registerComposerID(this.context.composerID)}});e.exports=a}),null);
__d("AtSignMentionsWithLongAliasStrategy",["DocumentMentionsRegex","qex"],(function(a,b,c,d,e,f){__p&&__p();a=b("DocumentMentionsRegex").PUNCTUATION;c=["@","\\uff20"].join("");d="[^"+c+a+"\\s]";f="(?:\\.[ |$]| |["+a+"]|)";a=b("qex")._("1222935")||25;var g=new RegExp("(?:^|\\s|\\()(["+c+"]((?:"+d+f+"){0,"+a+"}))$");b=50;var h=new RegExp("(?:^|\\s|\\()(["+c+"]((?:"+d+"){0,"+b+"}))$");f={name:"AtSignMentionsWithLongAliasStrategy",findMentionableString:function(a){var b=g.exec(a);b===null&&(b=h.exec(a));if(b!==null){a=b[2];if(a.length)return{matchingString:a,leadOffset:b[1].length}}return null}};e.exports=f}),null);